<div class="row-fluid">
	<div class="span12">
		<% if notice.blank? %>

		<% else %>
			<div class="alert alert-info"><a class="close" data-dismiss="alert" href="#">&times;</a> <%= notice %></div>
		<% end %>
		<div class="page-header">
			<h1><%= best_in_place @animal, :name, :type => :input, :nil => "Click me to add content!" %></h1>
		</div>
		<div class="row-fluid">
			<div class="tabbable span4">
				<ul class="nav nav-tabs">
					<li class="active"><a href="#1" data-toggle="tab">Overview</a></li>
					<li><a href="#2" data-toggle="tab">Details</a></li>
					<li><a href="#3" data-toggle="tab">History</a></li>
					<li><a href="#4" data-toggle="tab">Weight</a></li>
					<li><a href="#5" data-toggle="tab">Notes</a></li>
				</ul>
				<div class="tab-content">
					<div class="tab-pane active" id="1">
						<div class="">
							<p><strong>Status:</strong> <%= best_in_place @animal, :status_id, :type => :select, collection: @statuses, :nil => @animal.status.status %>
							</p>
							<p><strong>Species:</strong> <%= best_in_place @animal, :species_id, :type => :select, collection: @species, :nil => @animal.species.name %></p>
							<p><strong>Sex:</strong> <%= best_in_place @animal, :animal_sex_id, :type => :select, collection: [["1", "Male"], ["2", "Female"], ["3", "Unknown"]], :nil => @animal.animal_sex.sex unless @animal.animal_sex.blank? %></p>
							<p><strong>Age:</strong> <%= best_in_place @animal, :birthday, :type => :date, :display_as => :calculate_animal_age %></p>
							<p><strong>Spay/Neuter:</strong> <%= best_in_place @animal, :spay_neuter_id, :type => :select, collection: [["1", "No"], ["2", "Yes"], ["3", "Unknown"]], :nil => @animal.spay_neuter.spay unless @animal.spay_neuter.blank? %></p>
							<p><strong>Color:</strong> <%= best_in_place @animal, :animal_color_id, :type => :select, collection: @colors, :nil => @animal.animal_color.color %></p>
							<p><strong>Special Needs:</strong> <%= best_in_place @animal, :special_needs, type: :textarea %></p>
						</div>
					</div>
					<div class="tab-pane" id="2">
						<p><strong>Shelter:</strong> <%= best_in_place @animal, :shelter_id, :type => :select, collection: @shelters, :nil => @animal.shelter.name unless @animal.shelter.blank? %></p>
						<p><strong>Diet:</strong> <%= best_in_place @animal, :diet, :type => :textarea, :nil => "Click me to add content!" %></p>
						<p><strong>Deceased:</strong> <%= best_in_place @animal, :deceased, :type => :date, :display_as => :formatted_deceased_date %></p>
						<p><strong>Deceased Reason</strong>: <%= best_in_place @animal, :deceased_reason, :type => :textarea, :nil => "Click me to add content!" %></p>
					</div>
					<div class="tab-pane" id="3">
						<p><strong>Date of Intake:</strong> <%= best_in_place @animal, :date_of_intake, :type => :date, :display_as => :formatted_intake_date %></p>
						<p><strong>Date of Well Check:</strong> <%= best_in_place @animal, :date_of_well_check, :type => :date, :display_as => :formatted_well_date %></p>
					</div>
					<div class="tab-pane" id="4">
						<p><strong>Date of Intake:</strong> <%= @animal.date_of_intake unless @animal.date_of_intake.blank? %></p>
						<p><strong>Date of Well Check:</strong> <%= @animal.date_of_well_check unless @animal.date_of_well_check.blank? %></p>
					</div>
					<div class="tab-pane" id="5">
						<p><strong>Date of Intake:</strong> <%= @animal.date_of_intake unless @animal.date_of_intake.blank? %></p>
						<p><strong>Date of Well Check:</strong> <%= @animal.date_of_well_check unless @animal.date_of_well_check.blank? %></p>
					</div>
				</div>
			</div>
		
			<div class="span8 pull-right">
				<ul class="thumbnails">
						<li class="span4 pull-right">
							<a href="#" class="thumbnail">
								<img src="http://placehold.it/260x180" alt="">
							</a>
						</li>
						<li class="span4 pull-right">
							<a href="#" class="thumbnail">
								<img src="http://placehold.it/260x180" alt="">
							</a>
						</li>
						<li class="span4 pull-right">
							<a href="#" class="thumbnail">
								<img src="http://placehold.it/260x180" alt="">
							</a>
						</li>
						<li class="span4 pull-right">
							<a href="#" class="thumbnail">
								<img src="http://placehold.it/260x180" alt="">
							</a>
						</li>
				</ul>
			</div>
		</div>
	</div>
</div>


<%= link_to 'Back', admin_animals_path, :class => "js-pjax" %>

<% set_meta_description("Adopt #{@animal.name} from #{@animal.organization.name}") %>
<% set_meta_keywords("adopt,animal,pets") %>
<% set_head_title("Adopt #{@animal.name}") %>
<% content_for :title, "Adopt #{@animal.name} - Hospitium" %>
<title><%= yield (:title) %></title>


<% content_for :head do %>
	<link rel="stylesheet" type="text/css" href="https://d4uktpxr9m70.cloudfront.net/stylesheets/shadowbox.css">
<% end %>

<% content_for :javascript_footer do %>
	<script type="text/javascript" src="https://d4uktpxr9m70.cloudfront.net/javascripts/shadowbox.js"></script>
	<script type="text/javascript">
		Shadowbox.init();
	</script>
	<script type="text/javascript">
	//setup juggernaut to handle real time updating page changes
	//this one handles changes made with best in place
	var jug = new Juggernaut;

	jug.subscribe("/observer/<%= @animal.uuid %>", function(data){
		jQuery.each(data.record, function(i, val) {
			//alert(i); 
			//alert(val);
			if (i != "updated_at"){
					//have tp dp extra loop if order details updated since its an array
					//alert(val[1]);
					$('#best_in_place_animal_<%= @animal.id %>_'+i).css("background-color","#D1EED1");
					$('#best_in_place_animal_<%= @animal.id %>_'+i).html(val[1]);
					$('#best_in_place_animal_<%= @animal.id %>_'+i).delay(1500).animate({backgroundColor: "#fff"}, 1000 );
					// $.each( val.pop(), function(k, v){
					// 	alert(k);
					// 	alert(v);
					// 	$('#best_in_place_order_<%= @animal.id %>_'+k).css("background-color","#D1EED1");
					// 	//$('#best_in_place_order_'+current_order_id+'_order_details_'+k).children().html(v);
					// 	//$('#best_in_place_order_'+current_order_id+'_order_details_'+k).delay(1500).animate({backgroundColor: "#F5F5F5"}, 1000 );
					// });
			}
		});
	});
	</script>
<% end %>
