<div class="row-fluid">
	<div class="span12">
		<% if notice.blank? %>

		<% else %>
			<div class="alert alert-info"><a class="close" data-dismiss="alert" href="#">&times;</a> <%= notice %></div>
		<% end %>
		<div class="well">
			<h1>Dashboard</h1>
		</div>
		<div class="row-fluid">
			<div class="span12">
				<h2>Animal Statuses</h2>
				<div id="chart1" style="height: 300px; width: 500px; float:left; " class="jqplot-target"></div>
				<ul class="timelineAnimal">
					<% @final_status_hash['bar'].each do |key, value| %>
						<li class="barAnimal"><a href="#">
							<span class="labelAnimal"><%= key + " count: " + value["count"]%></span>
							<span class="countAnimal tooltip-class" data-animate-length="<%= number_to_percentage(value["percent"], :precision => 0)%>" style="height: 2%;opacity:0;" title="<%= value["count"] %>"><%= value["count"] %></span>
						</a></li>
					<%end%>
				</ul>
				<ul id="chartKey"></ul>
			</div>
		</div>

		<div class="row-fluid">
			<div class="span12">
				<h2>Animal Species</h2>
				<div id="chart2" style="height: 300px; width: 500px; float:left; " class="jqplot-target"></div>
				<ul class="timelineAnimal2">
					<% @final_species_hash['bar'].each do |key, value| %>
						<li class="barAnimal2"><a href="#">
							<span class="labelAnimal2"><%= key + " count: " + value["count"]%></span>
							<span class="countAnimal2 tooltip-class" data-animate-length="<%= number_to_percentage(value["percent"], :precision => 0)%>" style="height: 2%;opacity:0;" title="<%= value["count"] %>"><%= value["count"] %></span>
						</a></li>
					<%end%>
				</ul>
				<ul id="chartKey2"></ul>
			</div>
		</div>
		<hr />
		<div class="row-fluid">
			<div class="span12">
				<h2>Recent Tweets</h2>
				<table class="table table-striped table-bordered">
					<thead>
						<th>User</th>
						<th>Tweet</th>
					</thead>
					<tbody>
						<% @tweets.each do |tweet| %>
							<tr>
								<td><%= tweet.user.name %></td>
								<td><%= tweet.text %></td>
							</tr>
						<%end%>
					</tbody>
				</table>
			</div>
		</div>

		<% content_for :javascript_footer do %>
			
			<script>
				$(document).ready(function(){
					var data = <%= raw(@final_status_hash['pie'].to_json) %>;
					var plot1 = jQuery.jqplot ('chart1', [data], { 
						seriesDefaults: {
							// Make this a pie chart.
							renderer: jQuery.jqplot.PieRenderer, 
							rendererOptions: {
								// Put data labels on the pie slices.
								// By default, labels show the percentage of the slice.
								showDataLabels: true
							}
						}, 
						legend: { show:true, location: 'e' }
					}
					);
				});
				
				$(document).ready(function(){
					var data2 = <%= raw(@final_species_hash['pie'].to_json) %>;
					var plot2 = jQuery.jqplot ('chart2', [data2], { 
						seriesDefaults: {
							// Make this a pie chart.
							renderer: jQuery.jqplot.PieRenderer, 
							rendererOptions: {
								// Put data labels on the pie slices.
								// By default, labels show the percentage of the slice.
								showDataLabels: true
							}
						}, 
						legend: { show:true, location: 'e' }
					}
					);
				});
			</script>
		<% end %>
	</div>
</div>