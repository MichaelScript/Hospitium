(function(a){a.filters={append:function(c,g,e,d,b,h,i){var f="filters["+g+"]["+i+"][value]",j="filters["+g+"]["+i+"][operator]";switch(e){case "boolean":e='<select name="'+f+'"><option value="_discard">...</option><option value="true"'+(d=="true"?'selected="selected"':"")+'>True</option><option value="false"'+(d=="false"?'selected="selected"':"")+'>False</option><option disabled="disabled">---------</option><option '+(d=="_present"?'selected="selected"':"")+' value="_present">Is present</option><option '+ (d=="_blank"?'selected="selected"':"")+' value="_blank" >Is blank</option></select>';break;case "date":case "datetime":case "timestamp":e='<select class="switch-additionnal-fieldsets" name="'+j+'"><option data-additional-fieldset="false" value="_discard">...</option><option data-additional-fieldset="false"'+(b=="today"?'selected="selected"':"")+' value="today">Today</option><option data-additional-fieldset="false"'+(b=="yesterday"?'selected="selected"':"")+' value="yesterday">Yesterday</option><option data-additional-fieldset="false"'+ (b=="this_week"?'selected="selected"':"")+' value="this_week">This week</option><option data-additional-fieldset="false"'+(b=="last_week"?'selected="selected"':"")+' value="last_week">Last week</option><option data-additional-fieldset="true" '+(b=="less_than"?'selected="selected"':"")+' value="less_than">Less than ... days ago</option><option data-additional-fieldset="true" '+(b=="more_than"?'selected="selected"':"")+' value="more_than">More than ... days ago</option><option disabled="disabled">---------</option><option data-additional-fieldset="false"'+ (b=="_present"?'selected="selected"':"")+' value="_present">Is present</option><option data-additional-fieldset="false"'+(b=="_blank"?'selected="selected"':"")+' value="_blank" >Is blank</option></select><input class="additional-fieldset text_field" style="display:'+(b=="less_than"||b=="more_than"?"block":"none")+';" type="text" name="'+f+'" value="'+d+'" /> ';break;case "enum":h=$j("<div/>").html(h).text();e='<select name="'+f+'"><option value="_discard">...</option>'+h+'<option disabled="disabled">---------</option><option '+ (d=="_present"?'selected="selected"':"")+' value="_present">Is present</option><option '+(d=="_blank"?'selected="selected"':"")+' value="_blank" >Is blank</option></select>';break;case "string":case "text":case "belongs_to_association":e='<select class="switch-additionnal-fieldsets" value="'+b+'" name="'+j+'"><option data-additional-fieldset="true"'+(b=="like"?'selected="selected"':"")+' value="like">Contains</option><option data-additional-fieldset="true"'+(b=="is"?'selected="selected"':"")+' value="is">Is exactly</option><option data-additional-fieldset="true"'+ (b=="starts_with"?'selected="selected"':"")+' value="starts_with">Starts with</option><option data-additional-fieldset="true"'+(b=="ends_with"?'selected="selected"':"")+' value="ends_with">Ends with</option><option disabled="disabled">---------</option><option data-additional-fieldset="false"'+(b=="_present"?'selected="selected"':"")+' value="_present">Is present</option><option data-additional-fieldset="false"'+(b=="_blank"?'selected="selected"':"")+' value="_blank">Is blank</option></select><input class="additional-fieldset text_field" style="display:'+ (b=="_blank"||b=="_present"?"none":"block")+';" type="text" name="'+f+'" value="'+d+'" /> ';break;default:e='<input type="text" name="'+f+'" value="'+d+'" class="text_field"/> '}a("#filters_box").append('<div class="filter new" style="clear:both;"><div class="delete-box ui-state-default ui-corner-all"><span alt="delete" class="delete ui-icon ui-icon-trash" data-disabler-name="filters['+g+"]["+i+'][disabled]" style="cursor:pointer" title="delete"></span></div><label>'+c+"</label>"+e+"</div>");a("#filters_box .new select").uniform(); a("#filters_box .new").removeClass("new")}};a(document).ready(function(){a("#filter_select").bind("change",function(){var c=a(this).find("option:selected");a(this).val("");a.filters.append(c.data("field-label"),c.data("field-name"),c.data("field-type"),c.data("field-value"),c.data("field-operator"),c.data("field-options"),Date.now());a.uniform&&a.uniform.update()});a("#filters_box .delete").live("click",function(){a(this).parents(".filter").hide();a(this).append('<input type="hidden" name="'+a(this).data("disabler-name")+ '" value="true" />')});a("#filters_box .switch-additionnal-fieldsets").live("change",function(){var c=a(this).find("option:selected");a(c).data("additional-fieldset")?(a(this).parent().siblings(".additional-fieldset").val(""),a(this).parent().siblings(".additional-fieldset").show()):a(this).parent().siblings(".additional-fieldset").hide()})})})(jQuery);